<head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href='https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@500&display=swap' type='text/css'>
  <style>
    @font-face {
  font-family: 'Frank Ruhl Libre';
  font-style: normal;
  font-weight: 500;
  src: url(https://fonts.gstatic.com/s/frankruhllibre/v12/j8_36_fAw7jrcalD7oKYNX0QfAnPU0PG9JXGhLeI.woff2) format('woff2');
  unicode-range: U+0590-05FF, U+200C-2010, U+20AA, U+25CC, U+FB1D-FB4F;
}

    
      body {
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 20px;
      }

      p {
        border: 1px solid blue;
        padding: 2px;
        max-width: 350px;
        word-wrap: break-word;
        text-align: right;
      }

      div {
        padding: 2px;
      }
      
      button {
        margin-top:2px
      }

      .hebrew {
        font-size: 28px;
        font-family: 'Frank Ruhl Libre', serif;
      }
    

  </style>
</head>

<body>

  <h1>
    Hebrew Verse Memorization
  </h1>
  <button id="start1" onclick="start(1)">
    Genesis 1:1-8
  </button>
  <button id="start2" onclick="start(2)">
    Genesis 1:9-19
  </button>
  <button id="start3" onclick="start(3)">
    Genesis 1:20-31
  </button><br>
  <div id="verseLine">Verse <span id="verseNumberText"></span></div>
  <p class="hebrew" id="verseBox">Click the correct word below</p>
  <button id="1" class="hebrew" onclick="select(this.id, this.innerHTML)">
  </button>
  <button id="2" class="hebrew" onclick="select(this.id, this.innerHTML)">
  </button>
  <button id="3" class="hebrew" onclick="select(this.id, this.innerHTML)">
  </button>
  <button id="4" class="hebrew" onclick="select(this.id, this.innerHTML)">
  </button>
  <button id="5" class="hebrew" onclick="select(this.id, this.innerHTML)">
  </button>

  <script>
    function start(section) {
      // import text

      // reset buttons
      for (let i = 1; i <= 5; i++) {
        document.getElementById(i).innerHTML = "";
      }

      // split text into one whole array for word bank
      let section1 = "בְּרֵאשִׁית בָּרָא אֱלֹהִים אֵת הַשָּׁמַיִם וְאֵת הָאָרֶץ * וְהָאָרֶץ הָיְתָה תֹהוּ וָבֹהוּ וְחֹשֶׁךְ עַל פְּנֵי תְהוֹם וְרוּחַ אֱלֹהִים  מְרַחֶפֶת עַל פְּנֵי הַמָּיִם * וַיֹּאמֶר אֱלֹהִים יְהִי אוֹר וַיְהִי אוֹר * וַיַּרְא אֱלֹהִים אֶת הָאוֹר כִּי טוֹב וַיַּבְדֵּל אֱלֹהִים בֵּין הָאוֹר וּבֵין הַחֹשֶׁךְ * וַיִּקְרָא אֱלֹהִים לָאוֹר יוֹם וְלַחֹשֶׁךְ קָרָא לָיְלָה וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם אֶחָד * וַיֹּאמֶר אֱלֹהִים יְהִי רָקִיעַ בְּתוֹךְ הַמָּיִם וִיהִי מַבְדִּיל בֵּין מַיִם לָמָיִם * וַיַּעַשׂ אֱלֹהִים אֶת הָרָקִיעַ וַיַּבְדֵּל בֵּין הַמַּיִם אֲשֶׁר מִתַּחַת לָרָקִיעַ וּבֵין הַמַּיִם אֲשֶׁר מֵעַל לָרָקִיעַ וַיְהִי כֵן * וַיִּקְרָא אֱלֹהִים לָרָקִיעַ שָׁמָיִם וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם שֵׁנִי";
      
      let section2 = "וַיֹּאמֶר אֱלֹהִים יִקָּווּ הַמַּיִם מִתַּחַת הַשָּׁמַיִם אֶל מָקוֹם אֶחָד וְתֵרָאֶה הַיַּבָּשָׁה וַיְהִי כֵן * וַיִּקְרָא אֱלֹהִים לַיַּבָּשָׁה אֶרֶץ וּלְמִקְוֵה הַמַּיִם קָרָא יַמִּים וַיַּרְא אֱלֹהִים כִּי טוֹב * וַיֹּאמֶר אֱלֹהִים תַּדְשֵׁא הָאָרֶץ דֶּשֶׁא עֵשֶׂב מַזְרִיעַ זֶרַע עֵץ פְּרִי עֹשֶׂה פְּרִי לְמִינוֹ אֲשֶׁר זַרְעוֹ בוֹ עַל הָאָרֶץ וַיְהִי כֵן * וַתּוֹצֵא הָאָרֶץ דֶּשֶׁא עֵשֶׂב מַזְרִיעַ זֶרַע לְמִינֵהוּ וְעֵץ עֹשֶׂה פְּרִי אֲשֶׁר זַרְעוֹ בוֹ לְמִינֵהוּ וַיַּרְא אֱלֹהִים כִּי טוֹב * וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם שְׁלִישִׁי * וַיֹּאמֶר אֱלֹהִים יְהִי מְאֹרֹת בִּרְקִיעַ הַשָּׁמַיִם לְהַבְדִּיל בֵּין הַיּוֹם וּבֵין הַלָּיְלָה וְהָיוּ לְאֹתֹת וּלְמוֹעֲדִים וּלְיָמִים וְשָׁנִים * וְהָיוּ לִמְאוֹרֹת בִּרְקִיעַ הַשָּׁמַיִם לְהָאִיר עַל הָאָרֶץ וַיְהִי כֵן * וַיַּעַשׂ אֱלֹהִים אֶת שְׁנֵי הַמְּאֹרֹת הַגְּדֹלִים אֶת הַמָּאוֹר הַגָּדֹל לְמֶמְשֶׁלֶת הַיּוֹם וְאֶת הַמָּאוֹר הַקָּטֹן לְמֶמְשֶׁלֶת הַלַּיְלָה וְאֵת הַכּוֹכָבִים * וַיִּתֵּן אֹתָם אֱלֹהִים בִּרְקִיעַ הַשָּׁמָיִם לְהָאִיר עַל הָאָרֶץ * וְלִמְשֹׁל בַּיּוֹם וּבַלַּיְלָה וּלְהַבְדִּיל בֵּין הָאוֹר וּבֵין הַחֹשֶׁךְ וַיַּרְא אֱלֹהִים כִּי טוֹב * וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם רְבִיעִי";
      
      let section3 = "וַיֹּאמֶר אֱלֹהִים יִשְׁרְצוּ הַמַּיִם שֶׁרֶץ נֶפֶשׁ חַיָּה וְעוֹף יְעוֹפֵף עַל הָאָרֶץ עַל פְּנֵי רְקִיעַ הַשָּׁמָיִם * וַיִּבְרָא אֱלֹהִים אֶת הַתַּנִּינִם הַגְּדֹלִים וְאֵת כָּל נֶפֶשׁ הַחַיָּה הָרֹמֶשֶׂת אֲשֶׁר שָׁרְצוּ הַמַּיִם לְמִינֵהֶם וְאֵת כָּל עוֹף כָּנָף לְמִינֵהוּ וַיַּרְא אֱלֹהִים כִּי טוֹב * וַיְבָרֶךְ אֹתָם אֱלֹהִים לֵאמֹר פְּרוּ וּרְבוּ וּמִלְאוּ אֶת הַמַּיִם בַּיַּמִּים וְהָעוֹף יִרֶב בָּאָרֶץ * וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם חֲמִישִׁי * וַיֹּאמֶר אֱלֹהִים תּוֹצֵא הָאָרֶץ נֶפֶשׁ חַיָּה לְמִינָהּ בְּהֵמָה וָרֶמֶשׂ וְחַיְתוֹ אֶרֶץ לְמִינָהּ וַיְהִי כֵן * וַיַּעַשׂ אֱלֹהִים אֶת חַיַּת הָאָרֶץ לְמִינָהּ וְאֶת הַבְּהֵמָה לְמִינָהּ וְאֵת כָּל רֶמֶשׂ הָאֲדָמָה לְמִינֵהוּ וַיַּרְא אֱלֹהִים כִּי טוֹב * וַיֹּאמֶר אֱלֹהִים נַעֲשֶׂה אָדָם בְּצַלְמֵנוּ כִּדְמוּתֵנוּ וְיִרְדּוּ בִדְגַת הַיָּם וּבְעוֹף הַשָּׁמַיִם וּבַבְּהֵמָה וּבְכָל הָאָרֶץ וּבְכָל הָרֶמֶשׂ הָרֹמֵשׂ עַל הָאָרֶץ * וַיִּבְרָא אֱלֹהִים אֶת הָאָדָם בְּצַלְמוֹ בְּצֶלֶם אֱלֹהִים בָּרָא אֹתוֹ זָכָר וּנְקֵבָה בָּרָא אֹתָם * וַיְבָרֶךְ אֹתָם אֱלֹהִים וַיֹּאמֶר לָהֶם אֱלֹהִים פְּרוּ וּרְבוּ וּמִלְאוּ אֶת הָאָרֶץ וְכִבְשֻׁהָ וּרְדוּ בִּדְגַת הַיָּם וּבְעוֹף הַשָּׁמַיִם וּבְכָל חַיָּה הָרֹמֶשֶׂת עַל הָאָרֶץ * וַיֹּאמֶר אֱלֹהִים הִנֵּה נָתַתִּי לָכֶם אֶת כָּל עֵשֶׂב זֹרֵעַ זֶרַע אֲשֶׁר עַל פְּנֵי כָל הָאָרֶץ וְאֶת כָּל הָעֵץ אֲשֶׁר בּוֹ פְרִי עֵץ זֹרֵעַ זָרַע לָכֶם יִהְיֶה לְאָכְלָה * וּלְכָל חַיַּת הָאָרֶץ וּלְכָל עוֹף הַשָּׁמַיִם וּלְכֹל רוֹמֵשׂ עַל הָאָרֶץ אֲשֶׁר בּוֹ נֶפֶשׁ חַיָּה אֶת כָּל יֶרֶק עֵשֶׂב לְאָכְלָה וַיְהִי כֵן * וַיַּרְא אֱלֹהִים אֶת כָּל אֲשֶׁר עָשָׂה וְהִנֵּה טוֹב מְאֹד וַיְהִי עֶרֶב וַיְהִי בֹקֶר יוֹם הַשִּׁשִּׁי"
      
      let text = "";
      if (section == 1){
      	text = section1;
        this.startingVerse = 0;
        
      }
      if (section == 2){
      	text = section2;
        this.startingVerse = 8;
      }
      if (section == 3){
      	text = section3;
        this.startingVerse = 19;
      }

      this.wordBankSet = text.split(" ");

      // remove duplicates and empties and asterisks
      this.wordBankSet = this.wordBankSet.filter(s => s !== "*");
      this.wordBankSet = this.wordBankSet.filter(s => s !== "");
      this.wordBankSet = [...new Set(this.wordBankSet)];

      // split into verses
      this.wholeVerseArray = text.split("*");

      // add each verse to its own array split by words
      this.verseArray = [];
      for (i = 0; i < this.wholeVerseArray.length; i++) {
        this.verseArray[i] = this.wholeVerseArray[i].split(" ");
        this.verseArray[i] = this.verseArray[i].filter(s => s !== "");
      }

      // print and log check
      console.log(this.wordBankSet);
      console.log(this.verseArray);

      // initiate verse and stuff
      this.currentVerse = 1;
      this.currentWord = 0;
      this.correctWord = this.verseArray[this.currentVerse - 1][this.currentWord];
      document.getElementById("verseNumberText").innerHTML = this.currentVerse+this.startingVerse;
      //document.getElementById("verseBox").innerHTML = "___";

      // set buttons
      setButtons();
    }

    function setButtons() {

      // set correct button
      let correctButtonRand = 1 + Math.floor(Math.random() * 5);
      document.getElementById(correctButtonRand).innerHTML = this.correctWord;

      // set other buttons
      let randArray = [];
      let rand = 0;
      for (let i = 1; i <= 5; i++) {

        // reset color
        document.getElementById(i).style.background = "#ccf2ff";
        if (document.getElementById(i).innerHTML != this.correctWord) {

          rand = Math.floor(Math.random() * this.wordBankSet.length);
          while ((this.wordBankSet[rand] == this.correctWord) || (randArray.find(e => e == rand) >= 0)) {
            rand = Math.floor(Math.random() * this.wordBankSet.length);
          }
          randArray.push(rand);

          document.getElementById(i).innerHTML = this.wordBankSet[rand];
        }
      }
    }

    function select(id, word) {
      console.log(id);
      console.log(word);

      // identify incorrect word
      if (word != this.correctWord) {
        document.getElementById(id).style.background = "red";
      }

      // for correct word, write in verse box
      else {
        if (this.currentWord == 0) {
          this.boxText = word + "   ";
        } else {
          this.boxText = this.boxText + word + "   ";
        }
        //console.log(this.boxText);

        document.getElementById("verseBox").innerHTML = this.boxText;

        // if within this verse
        if (this.currentWord < this.verseArray[this.currentVerse - 1].length - 1) {
          // update word and buttons
          this.currentWord++;
          this.correctWord = this.verseArray[this.currentVerse - 1][this.currentWord];
          console.log(this.currentWord);
          console.log(this.correctWord);
          setButtons();
        }

        // else update verse on last word
        else {
          // wait a second
          const myTimeout = setTimeout(updateVerse, 2000);
        }
      }
    }

    function updateVerse() {
      // if within number of verses in passage
      if (this.currentVerse < this.verseArray.length) {
        this.currentVerse++;
        this.currentWord = 0;
        this.correctWord = this.verseArray[this.currentVerse - 1][this.currentWord];
        setButtons();
        document.getElementById("verseBox").innerHTML = "___";
        document.getElementById("verseNumberText").innerHTML = this.currentVerse+this.startingVerse;
      }
      // else end all
      else {
        alert("You did it, congratulations!");
      }
    }

    function Game() {
      this.numberVerses = 31;
      this.currentVerse = 1;
      this.startingVerse = 0;
      this.currentWord = 0;
      this.correctWord = "";
      this.boxText = "";
      this.wordBankSet = [];
      this.wholeVerseArray = [];
      this.verseArray = [];

      this.start = start;
      this.select = select;
    }

    // onload
    window.onload = function() {
      game1 = new Game();
     // this.start();

    }

  </script>
</body>
